import{h as re,i as te,r as u,p as oe,j as r,u as ae,P as se,R as le,m as L}from"./index-C0WB-Die.js";import{C as ie}from"./ContextualCTA-DSb2FyAQ.js";import{U as y,C as H}from"./colors-CUenxMqT.js";function ne(){!re.current&&te();const[e]=u.useState(oe.current);return e}var _=new Map,I=new WeakMap,V=0,ce=void 0;function de(e){return e?(I.has(e)||(V+=1,I.set(e,V.toString())),I.get(e)):"0"}function me(e){return Object.keys(e).sort().filter(a=>e[a]!==void 0).map(a=>`${a}_${a==="root"?de(e.root):e[a]}`).toString()}function ue(e){const a=me(e);let i=_.get(a);if(!i){const p=new Map;let f;const m=new IntersectionObserver(c=>{c.forEach(n=>{var d;const x=n.isIntersecting&&f.some(v=>n.intersectionRatio>=v);e.trackVisibility&&typeof n.isVisible>"u"&&(n.isVisible=x),(d=p.get(n.target))==null||d.forEach(v=>{v(x,n)})})},e);f=m.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:a,observer:m,elements:p},_.set(a,i)}return i}function pe(e,a,i={},p=ce){if(typeof window.IntersectionObserver>"u"&&p!==void 0){const d=e.getBoundingClientRect();return a(p,{isIntersecting:p,target:e,intersectionRatio:typeof i.threshold=="number"?i.threshold:0,time:0,boundingClientRect:d,intersectionRect:d,rootBounds:d}),()=>{}}const{id:f,observer:m,elements:c}=ue(i),n=c.get(e)||[];return c.has(e)||c.set(e,n),n.push(a),m.observe(e),function(){n.splice(n.indexOf(a),1),n.length===0&&(c.delete(e),m.unobserve(e)),c.size===0&&(m.disconnect(),_.delete(f))}}function ge({threshold:e,delay:a,trackVisibility:i,rootMargin:p,root:f,triggerOnce:m,skip:c,initialInView:n,fallbackInView:d,onChange:x}={}){var v;const[S,T]=u.useState(null),k=u.useRef(x),[N,E]=u.useState({inView:!!n,entry:void 0});k.current=x,u.useEffect(()=>{if(c||!S)return;let o;return o=pe(S,(b,j)=>{E({inView:b,entry:j}),k.current&&k.current(b,j),j.isIntersecting&&m&&o&&(o(),o=void 0)},{root:f,rootMargin:p,threshold:e,trackVisibility:i,delay:a},d),()=>{o&&o()}},[Array.isArray(e)?e.toString():e,S,f,p,m,c,i,d,a]);const C=(v=N.entry)==null?void 0:v.target,t=u.useRef(void 0);!S&&C&&!m&&!c&&t.current!==C&&(t.current=C,E({inView:!!n,entry:void 0}));const s=[T,N.inView,N.entry];return s.ref=s[0],s.inView=s[1],s.entry=s[2],s}const fe=({title:e,clearLabel:a,expandLabel:i,collapseLabel:p,expandAllLabel:f,collapseAllLabel:m,filteredCount:c,totalCount:n,groups:d,selectedSkills:x,onToggleSkill:v,onClear:S,getSkillStyle:T,skillCounts:k,getCountAccentColor:N,getCountNormalColor:E,getCountLightColor:C})=>{const t="projects.skillFilter.isExpanded",s="projects.skillFilter.collapsedGroups",[o,b]=u.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(t)==="true"),[j,w]=u.useState(()=>{if(typeof window>"u")return[];const l=window.localStorage.getItem(s);if(!l)return[];try{const h=JSON.parse(l);return Array.isArray(h)?h.filter(g=>typeof g=="string"):[]}catch{return[]}});u.useEffect(()=>{window.localStorage.setItem(t,String(o))},[o]),u.useEffect(()=>{window.localStorage.setItem(s,JSON.stringify(j))},[j]),u.useEffect(()=>{const l=new Set(d.map(h=>h.id));w(h=>h.filter(g=>l.has(g)))},[d]);const O=()=>{b(l=>!l)},D=l=>{w(h=>h.includes(l)?h.filter(g=>g!==l):[...h,l])},W=()=>w([]),X=()=>w(d.map(l=>l.id)),q=j.length===0,Q=d.length>0&&j.length===d.length,Z=!q,ee=!Q,F=l=>l instanceof Element&&!!l.closest("button, a, input, select, textarea"),J=Math.max(1,String(n).length,String(c).length);return r.jsxs("div",{className:`projects-filters ${o?"":"is-collapsed"}`.trim(),"aria-label":e,"aria-expanded":o,style:{"--ui-text-secondary":y.text.secondary,"--ui-text-accent":y.text.accent,"--ui-surface-highlight":y.surface.highlight,"--ui-surface-highlight-hover":y.surface.highlightHover,"--ui-border-highlight":y.border.highlight,"--ui-shadow-highlight":y.shadow.highlight,"--ui-icon-hover-muted":y.icon.hoverMuted,"--ui-icon-hover-strong":y.icon.hoverStrong,"--ui-action-expand-normal":y.action.expandNormal,"--ui-action-expand-hover":y.action.expandHover,"--ui-action-collapse-normal":y.action.collapseNormal,"--ui-action-collapse-hover":y.action.collapseHover,"--ui-action-clear-normal":y.action.clearNormal,"--ui-action-clear-hover":y.action.clearHover},children:[r.jsxs("div",{className:"projects-filters-header",onClick:l=>{F(l.target)||O()},onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),O())},role:"button",tabIndex:0,"aria-expanded":o,children:[r.jsx("div",{className:"projects-filters-header-main",children:r.jsx("p",{className:`projects-filters-title ${x.length>0?"is-filtered":""}`.trim(),children:e})}),r.jsxs("div",{className:"projects-filters-actions",children:[r.jsxs("div",{className:"skill-filter-controls",children:[r.jsxs("div",{className:`skill-filter-bulk-actions ${o?"":"is-hidden"}`.trim(),"aria-hidden":!o,children:[r.jsx("div",{className:"skill-filter-bulk-wrap",children:r.jsx("button",{type:"button",className:"skill-filter-bulk-action is-expand",onClick:W,disabled:!o||!Z,"aria-label":f,title:f,children:r.jsx("span",{"aria-hidden":"true",className:"skill-filter-action-icon",style:{"--skill-filter-icon-url":"url('/icon/icon-ui-expand.svg')"}})})}),r.jsx("div",{className:"skill-filter-bulk-wrap",children:r.jsx("button",{type:"button",className:"skill-filter-bulk-action is-collapse",onClick:X,disabled:!o||!ee,"aria-label":m,title:m,children:r.jsx("span",{"aria-hidden":"true",className:"skill-filter-action-icon",style:{"--skill-filter-icon-url":"url('/icon/icon-ui-collapse.svg')"}})})})]}),r.jsx("div",{className:`skill-filter-clear-wrap ${!o&&x.length===0?"is-collapsed-inactive":""}`.trim(),"aria-hidden":!o&&x.length===0,children:r.jsx("button",{type:"button",className:"skill-filter-clear is-clear",onClick:S,disabled:x.length===0,"aria-label":a,title:a,children:r.jsx("span",{"aria-hidden":"true",className:"skill-filter-action-icon",style:{"--skill-filter-icon-url":"url('/icon/icon-ui-clear.svg')"}})})})]}),r.jsxs("p",{className:"projects-filter-summary projects-filter-summary-inline",children:[r.jsx("span",{className:"projects-filter-summary-count",style:{"--projects-summary-digits":J},children:c}),r.jsx("span",{className:"projects-filter-summary-separator","aria-hidden":"true",children:"/"}),r.jsx("span",{className:"projects-filter-summary-count",style:{"--projects-summary-digits":J},children:n})]}),r.jsx("button",{type:"button",className:`skill-filter-toggle-circle ${o?"is-expanded":""}`,onClick:l=>{l.stopPropagation(),O()},"aria-expanded":o,"aria-label":o?p:i,title:o?p:i,children:r.jsx("span",{className:"skill-filter-toggle-chevron","aria-hidden":"true",children:">"})})]})]}),r.jsx("div",{className:`projects-filters-body ${o?"is-expanded":""}`,"aria-hidden":!o,children:r.jsx("div",{className:"projects-filters-body-inner",children:r.jsx("div",{className:"skills-filter-groups",children:d.map(l=>{const h=!j.includes(l.id);return r.jsxs("section",{className:"skills-filter-group",onClick:g=>{F(g.target)||D(l.id)},children:[r.jsxs("button",{type:"button",className:"skills-filter-group-header",onClick:()=>D(l.id),"aria-expanded":h,"aria-controls":`skills-filter-group-${l.id}`,children:[r.jsx("span",{className:`skills-filter-group-chevron ${h?"is-expanded":""}`.trim(),"aria-hidden":"true",children:">"}),r.jsx("h3",{className:"skills-filter-group-title",children:l.label})]}),r.jsx("div",{id:`skills-filter-group-${l.id}`,className:`skills-filter-group-body ${h?"is-expanded":""}`.trim(),"aria-hidden":!h,children:r.jsx("ul",{className:"skills-filter-list",children:l.skills.map(g=>{const G=x.includes(g);return r.jsx("li",{children:r.jsxs("button",{type:"button",className:`skill-filter ${G?"is-active":""}`,onClick:()=>v(g),style:T(g,G),children:[g," ",r.jsx("span",{className:`skill-filter-count ${G?"is-selected":""}`.trim(),style:{"--skill-count-accent":N(g),"--skill-count-normal":E(g),"--skill-count-light":C(g)},children:k[g]??0})]})},g)})})})]},l.id)})})})})]})},R={product:{label:"Product Type",order:1},programming:{label:"Programming Languages",order:2},application:{label:"Application Development",order:3},platform:{label:"Cloud, DevOps & Development Tools",order:4},design:{label:"Design & Concepts",order:5}},K=[{name:"Java",category:"programming",color:"amber",order:1},{name:"Kotlin",category:"programming",color:"lavender",order:2},{name:"C++",category:"programming",color:"periwinkle",order:3},{name:"C",category:"programming",color:"blue",order:4},{name:"Python",category:"programming",color:"blue",order:5},{name:"Go",category:"programming",color:"sky",order:6},{name:"JavaScript",category:"programming",color:"yellow",order:7},{name:"Dart",category:"programming",color:"sky",order:8},{name:"Prolog",category:"programming",color:"rose",order:9},{name:"Haskell",category:"programming",color:"lilac",order:10},{name:"React",category:"application",color:"periwinkle",order:1},{name:"Node.js",category:"application",color:"green",order:2},{name:"HTML",category:"application",color:"peach",order:3},{name:"CSS",category:"application",color:"yellow",order:4},{name:"Flutter",category:"application",color:"sky",order:5},{name:"Jetpack Compose",category:"application",color:"blue",order:6},{name:"Android",category:"application",color:"green",order:7},{name:"Android Studio",category:"application",color:"green",order:8},{name:"Game Development",category:"application",color:"lilac",order:9},{name:"Git",category:"platform",color:"peach",order:1},{name:"Firebase",category:"platform",color:"yellow",order:2},{name:"AWS",category:"platform",color:"orange",order:3},{name:"Vagrant",category:"platform",color:"blue",order:4},{name:"GitHub Actions",category:"platform",color:"peach",order:5},{name:"IntelliJ",category:"platform",color:"pink",order:6},{name:"VS Code",category:"platform",color:"sky",order:7},{name:"Figma",category:"design",color:"pink",order:1},{name:"Canva",category:"design",color:"lilac",order:2},{name:"Fusion 360",category:"design",color:"yellow",order:3},{name:"Maya",category:"design",color:"sky",order:4},{name:"Rendering",category:"design",color:"periwinkle",order:5},{name:"3D Graphics",category:"design",color:"amber",order:6},{name:"MVVM",category:"design",color:"green",order:7},{name:"AI",category:"design",color:"rose",order:9},{name:"Pathfinding",category:"design",color:"sky",order:10},{name:"Concurrency",category:"design",color:"rose",order:11},{name:"Algorithms",category:"design",color:"yellow",order:12},{name:"Mobile App",category:"product",color:"green",order:1},{name:"Cross-Platform App",category:"product",color:"sky",order:2},{name:"AI Tool",category:"product",color:"rose",order:3},{name:"Graphics Engine",category:"product",color:"periwinkle",order:4},{name:"Simulation",category:"product",color:"amber",order:5},{name:"Board Game",category:"product",color:"lavender",order:6},{name:"Workflow",category:"product",color:"blue",order:7},{name:"iOS Shortcuts",category:"product",color:"green",order:8},{name:"Productivity",category:"product",color:"amber",order:9}],Y=e=>e.trim().toLowerCase(),he=new Map(K.map(e=>[Y(e.name),e])),$=e=>he.get(Y(e)),z=e=>{const a=$(e);return a?H[a.color].normal:"#f0f0f0"},P=(e,a="normal")=>{const i=$(e);return i?H[i.color][a]:"#f0f0f0"},U=e=>R[e].label,ye=()=>Object.keys(R).sort((e,a)=>R[e].order-R[a].order),A=e=>K.filter(a=>a.category===e).sort((a,i)=>a.order-i.order);A("programming").map(e=>e.name),A("application").map(e=>e.name),A("platform").map(e=>e.name),A("design").map(e=>e.name),A("product").map(e=>e.name);const M=e=>e.trim().toLowerCase(),B="projects.selectedSkills",xe=({project:e,shouldReduce:a})=>{const[i,p]=ge({triggerOnce:!0,threshold:.15}),f=e.external??e.github??`/projects/${e.slug}`,m=!!(e.external||e.github);return r.jsx(L.a,{ref:i,href:f,target:m?"_blank":void 0,rel:m?"noreferrer noopener":void 0,className:"project-card-link","data-project-slug":e.slug,initial:a?!1:{opacity:0,y:30},animate:p?a?{}:{opacity:1,y:0}:{},whileHover:a?{}:{y:-6,scale:1.01},whileTap:a?{}:{scale:.99},transition:{type:"spring",stiffness:220,damping:16},children:r.jsxs("div",{className:"project-card",children:[r.jsxs("div",{className:"project-media",children:[e.cover?r.jsx(L.img,{src:e.cover,alt:e.title,className:"project-image",loading:"lazy"}):r.jsx("div",{className:"project-image placeholder","aria-hidden":"true"}),r.jsx("span",{className:"project-chip",children:e.date||"Featured Project"})]}),r.jsxs("div",{className:"project-text",children:[r.jsx("h3",{className:"project-card-title",children:e.title}),e.tags.length>0&&r.jsx("ul",{className:"project-tags","aria-label":"Skills used",children:e.tags.map(c=>{const n=$(c),d=n?n.name:c;return r.jsx("li",{className:"project-tag",style:{backgroundColor:z(c)},title:n?U(n.category):"Project keyword",children:d},`${e.slug}-${c}`)})})]})]})})},ke=()=>{const{t:e}=ae(),a=ne(),[i,p]=u.useState(()=>{if(typeof window>"u")return[];const t=window.localStorage.getItem(B);if(!t)return[];try{const s=JSON.parse(t);return Array.isArray(s)?s.filter(o=>typeof o=="string"):[]}catch{return[]}}),f=e("projects.list",{returnObjects:!0}),m=u.useMemo(()=>f.map(t=>{const s=se.find(o=>o.slug===t.slug);return s?{...s,...t,title:t.title??s.title??s.slug,date:t.date??"",description:t.description??"",github:s.github,external:s.external,tags:s.tags??[]}:null}).filter(Boolean),[f]),c=u.useMemo(()=>ye().map(t=>({id:t,label:U(t),skills:A(t).map(s=>s.name)})).filter(t=>t.skills.length>0),[]),n=u.useMemo(()=>c.flatMap(t=>t.skills),[c]),d=u.useMemo(()=>{const t=Object.fromEntries(n.map(o=>[o,0])),s=new Map(n.map(o=>[M(o),o]));return m.forEach(o=>{const b=new Set;o.tags.forEach(j=>{const w=s.get(M(j));w&&b.add(w)}),b.forEach(j=>{t[j]+=1})}),t},[n,m]),x=u.useMemo(()=>c.map(t=>({...t,skills:[...t.skills].sort((s,o)=>{const b=(d[o]??0)-(d[s]??0);return b!==0?b:s.localeCompare(o,void 0,{sensitivity:"base"})})})),[c,d]),v=u.useMemo(()=>{if(i.length===0)return m;const t=i.map(M);return m.filter(s=>{const o=s.tags.map(M);return t.some(b=>o.includes(b))})},[m,i]),S=t=>{p(s=>s.includes(t)?s.filter(o=>o!==t):[...s,t])},T=()=>p([]);le.useEffect(()=>{window.localStorage.setItem(B,JSON.stringify(i))},[i]);const k=t=>P(t,"dark"),N=t=>P(t,"normal"),E=t=>P(t,"light"),C=(t,s)=>s?{backgroundColor:k(t),color:"#ffffff",borderColor:k(t)}:{backgroundColor:z(t),color:"#1f2937",borderColor:"rgba(31, 41, 55, 0.12)"};return r.jsxs("section",{className:"projects-section",children:[r.jsx(fe,{title:"filter",clearLabel:e("projects.filters.clear"),expandLabel:e("projects.filters.expand"),collapseLabel:e("projects.filters.collapse"),expandAllLabel:e("projects.filters.expandAll"),collapseAllLabel:e("projects.filters.collapseAll"),filteredCount:v.length,totalCount:m.length,groups:x,skillCounts:d,selectedSkills:i,onToggleSkill:S,onClear:T,getSkillStyle:C,getCountAccentColor:k,getCountNormalColor:N,getCountLightColor:E}),r.jsxs("div",{className:"projects-grid",children:[v.map(t=>r.jsx(xe,{project:t,shouldReduce:!!a},t.slug)),v.length===0&&r.jsx("p",{className:"projects-empty",children:e("projects.filters.empty")})]}),r.jsx(L.div,{className:"coming-soon",initial:a?!1:{opacity:0},viewport:{once:!0,amount:.2},whileInView:a?{}:{opacity:1},transition:{delay:.5},children:e("projects.comingSoon")}),r.jsx(ie,{current:"Projects"})]})};export{ke as default};
