import{h as _,i as D,r as y,p as F,j as a,u as V,P as B,R as G,m as E}from"./index-DUD1QYkI.js";import{C as J}from"./ContextualCTA-BMj54Xzm.js";function K(){!_.current&&D();const[e]=y.useState(F.current);return e}var T=new Map,w=new WeakMap,A=0,z=void 0;function H(e){return e?(w.has(e)||(A+=1,w.set(e,A.toString())),w.get(e)):"0"}function Y(e){return Object.keys(e).sort().filter(o=>e[o]!==void 0).map(o=>`${o}_${o==="root"?H(e.root):e[o]}`).toString()}function W(e){const o=Y(e);let l=T.get(o);if(!l){const g=new Map;let m;const i=new IntersectionObserver(d=>{d.forEach(s=>{var c;const h=s.isIntersecting&&m.some(b=>s.intersectionRatio>=b);e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=h),(c=g.get(s.target))==null||c.forEach(b=>{b(h,s)})})},e);m=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),l={id:o,observer:i,elements:g},T.set(o,l)}return l}function X(e,o,l={},g=z){if(typeof window.IntersectionObserver>"u"&&g!==void 0){const c=e.getBoundingClientRect();return o(g,{isIntersecting:g,target:e,intersectionRatio:typeof l.threshold=="number"?l.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:m,observer:i,elements:d}=W(l),s=d.get(e)||[];return d.has(e)||d.set(e,s),s.push(o),i.observe(e),function(){s.splice(s.indexOf(o),1),s.length===0&&(d.delete(e),i.unobserve(e)),d.size===0&&(i.disconnect(),T.delete(m))}}function q({threshold:e,delay:o,trackVisibility:l,rootMargin:g,root:m,triggerOnce:i,skip:d,initialInView:s,fallbackInView:c,onChange:h}={}){var b;const[j,p]=y.useState(null),u=y.useRef(h),[f,x]=y.useState({inView:!!s,entry:void 0});u.current=h,y.useEffect(()=>{if(d||!j)return;let v;return v=X(j,(S,k)=>{x({inView:S,entry:k}),u.current&&u.current(S,k),k.isIntersecting&&i&&v&&(v(),v=void 0)},{root:m,rootMargin:g,threshold:e,trackVisibility:l,delay:o},c),()=>{v&&v()}},[Array.isArray(e)?e.toString():e,j,m,g,i,d,l,c,o]);const r=(b=f.entry)==null?void 0:b.target,t=y.useRef(void 0);!j&&r&&!i&&!d&&t.current!==r&&(t.current=r,x({inView:!!s,entry:void 0}));const n=[p,f.inView,f.entry];return n.ref=n[0],n.inView=n[1],n.entry=n[2],n}const Q=({title:e,expandLabel:o,collapseLabel:l,summaryLabel:g,groups:m,selectedSkills:i,onToggleSkill:d,onClear:s,getSkillStyle:c,skillCounts:h,getCountStyle:b})=>{const j="projects.skillFilter.isExpanded",[p,u]=y.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(j)==="true");y.useEffect(()=>{window.localStorage.setItem(j,String(p))},[p]);const f=()=>{u(r=>!r)},x=r=>r instanceof Element&&!!r.closest("button, a, input, select, textarea");return a.jsxs("div",{className:`projects-filters ${p?"":"is-collapsed"}`.trim(),"aria-label":e,"aria-expanded":p,onClick:r=>{x(r.target)||f()},children:[a.jsxs("div",{className:"projects-filters-header",onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),f())},role:"button",tabIndex:0,"aria-expanded":p,children:[a.jsxs("div",{className:"projects-filters-header-main",children:[a.jsx("p",{className:`projects-filters-title ${i.length>0?"is-filtered":""}`.trim(),children:e}),a.jsx("button",{type:"button",className:`skill-filter-clear ${i.length===0?"is-hidden":""}`.trim(),onClick:s,disabled:i.length===0,"aria-hidden":i.length===0,"aria-label":"clear filters",title:"clear filters",children:"ðŸ—‘ï¸"})]}),a.jsxs("div",{className:"projects-filters-actions",children:[a.jsx("p",{className:"projects-filter-summary projects-filter-summary-inline",children:g}),a.jsx("button",{type:"button",className:`skill-filter-toggle-circle ${p?"is-expanded":""}`,onClick:r=>{r.stopPropagation(),f()},"aria-expanded":p,"aria-label":p?l:o,title:p?l:o,children:a.jsx("span",{className:"skill-filter-toggle-chevron","aria-hidden":"true",children:">"})})]})]}),a.jsx("div",{className:`projects-filters-body ${p?"is-expanded":""}`,"aria-hidden":!p,children:a.jsx("div",{className:"projects-filters-body-inner",children:a.jsx("div",{className:"skills-filter-groups",children:m.map(r=>a.jsxs("section",{className:"skills-filter-group",children:[a.jsx("h3",{className:"skills-filter-group-title",children:r.label}),a.jsx("ul",{className:"skills-filter-list",children:r.skills.map(t=>{const n=i.includes(t);return a.jsx("li",{children:a.jsxs("button",{type:"button",className:`skill-filter ${n?"is-active":""}`,onClick:()=>d(t),style:c(t,n),children:[t," ",a.jsxs("span",{className:"skill-filter-count",style:b(t,n),children:["(",h[t]??0,")"]})]})},t)})})]},r.id))})})})]})},M={programming:{label:"Programming Languages",order:1},application:{label:"Application Development",order:2},platform:{label:"Cloud, DevOps & Development Tools",order:3},design:{label:"Design & Concepts",order:4}},O=[{name:"Java",category:"programming",color:"amber",order:1},{name:"Kotlin",category:"programming",color:"lavender",order:2},{name:"C++",category:"programming",color:"blue",order:3},{name:"C",category:"programming",color:"blue",order:4},{name:"Python",category:"programming",color:"blue",order:5},{name:"Go",category:"programming",color:"sky",order:6},{name:"JavaScript",category:"programming",color:"lemon",order:7},{name:"Dart",category:"programming",color:"sky",order:8},{name:"Prolog",category:"programming",color:"rose",order:9},{name:"Haskell",category:"programming",color:"lilac",order:10},{name:"React",category:"application",color:"green",order:1},{name:"Node.js",category:"application",color:"green",order:2},{name:"HTML",category:"application",color:"peach",order:3},{name:"CSS",category:"application",color:"yellow",order:4},{name:"Flutter",category:"application",color:"sky",order:5},{name:"Jetpack Compose",category:"application",color:"green",order:6},{name:"Android",category:"application",color:"green",order:7},{name:"Android Studio",category:"application",color:"green",order:8},{name:"Game Development",category:"application",color:"lilac",order:9},{name:"Git",category:"platform",color:"orange",order:1},{name:"Firebase",category:"platform",color:"yellow",order:2},{name:"AWS",category:"platform",color:"peach",order:3},{name:"Vagrant",category:"platform",color:"blue",order:4},{name:"GitHub Actions",category:"platform",color:"orange",order:5},{name:"IntelliJ",category:"platform",color:"pink",order:6},{name:"VS Code",category:"platform",color:"blue",order:7},{name:"Figma",category:"design",color:"green",order:1},{name:"Canva",category:"design",color:"lavender",order:2},{name:"Fusion 360",category:"design",color:"yellow",order:3},{name:"Maya",category:"design",color:"sky",order:4},{name:"Rendering",category:"design",color:"blue",order:5},{name:"3D Graphics",category:"design",color:"lavender",order:6},{name:"MVVM",category:"design",color:"periwinkle",order:7},{name:"SRS",category:"design",color:"amber",order:8},{name:"AI",category:"design",color:"rose",order:9},{name:"Pathfinding",category:"design",color:"sky",order:10},{name:"Concurrency",category:"design",color:"green",order:11},{name:"Algorithms",category:"design",color:"orange",order:12}],U={pink:"#f5c6e6",rose:"#ffbecf",peach:"#ffc6bc",orange:"#ffc8aa",amber:"#ffd29a",lemon:"#fffb8d",yellow:"#ffe993",green:"#aaedaf",sky:"#a4e4fa",blue:"#b7d1ff",periwinkle:"#d2e3fc",lavender:"#dec7ff",lilac:"#ddbdfc"},P=e=>e.trim().toLowerCase(),Z=new Map(O.map(e=>[P(e.name),e])),I=e=>Z.get(P(e)),R=e=>{const o=I(e);return o?U[o.color]:"#f0f0f0"},$=e=>M[e].label,ee=()=>Object.keys(M).sort((e,o)=>M[e].order-M[o].order),C=e=>O.filter(o=>o.category===e).sort((o,l)=>o.order-l.order);C("programming").map(e=>e.name),C("application").map(e=>e.name),C("platform").map(e=>e.name),C("design").map(e=>e.name);const N=e=>e.trim().toLowerCase(),L="projects.selectedSkills",re=e=>{const o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!o)return e;let l=parseInt(o[1],16)/255,g=parseInt(o[2],16)/255,m=parseInt(o[3],16)/255;const i=Math.max(l,g,m),d=Math.min(l,g,m),s=i-d;let c=0,h=0;const b=(i+d)/2;s!==0&&(h=s/(1-Math.abs(2*b-1)),i===l?c=(g-m)/s%6:i===g?c=(m-l)/s+2:c=(l-g)/s+4,c*=60,c<0&&(c+=360));const j=Math.min(1,h+.55),p=Math.max(0,Math.min(1,b-.42)),u=(1-Math.abs(2*p-1))*j,f=u*(1-Math.abs(c/60%2-1)),x=p-u/2;let r=0,t=0,n=0;return c>=0&&c<60?[r,t,n]=[u,f,0]:c<120?[r,t,n]=[f,u,0]:c<180?[r,t,n]=[0,u,f]:c<240?[r,t,n]=[0,f,u]:c<300?[r,t,n]=[f,0,u]:[r,t,n]=[u,0,f],`rgb(${Math.round((r+x)*255)} ${Math.round((t+x)*255)} ${Math.round((n+x)*255)})`},te=({project:e,shouldReduce:o})=>{const[l,g]=q({triggerOnce:!0,threshold:.15}),m=e.external??e.github??`/projects/${e.slug}`,i=!!(e.external||e.github);return a.jsx(E.a,{ref:l,href:m,target:i?"_blank":void 0,rel:i?"noreferrer noopener":void 0,className:"project-card-link",initial:o?!1:{opacity:0,y:30},animate:g?o?{}:{opacity:1,y:0}:{},whileHover:o?{}:{y:-6,scale:1.01},whileTap:o?{}:{scale:.99},transition:{type:"spring",stiffness:220,damping:16},children:a.jsxs("div",{className:"project-card",children:[a.jsxs("div",{className:"project-media",children:[e.cover?a.jsx(E.img,{src:e.cover,alt:e.title,className:"project-image",loading:"lazy"}):a.jsx("div",{className:"project-image placeholder","aria-hidden":"true"}),a.jsx("span",{className:"project-chip",children:e.date||"Featured Project"})]}),a.jsxs("div",{className:"project-text",children:[a.jsx("h3",{className:"project-card-title",children:e.title}),e.tags.length>0&&a.jsx("ul",{className:"project-tags","aria-label":"Skills used",children:e.tags.map(d=>{const s=I(d),c=s?s.name:d;return a.jsx("li",{className:"project-tag",style:{backgroundColor:R(d)},title:s?$(s.category):"Project keyword",children:c},`${e.slug}-${d}`)})})]})]})})},ne=()=>{const{t:e}=V(),o=K(),[l,g]=y.useState(()=>{if(typeof window>"u")return[];const r=window.localStorage.getItem(L);if(!r)return[];try{const t=JSON.parse(r);return Array.isArray(t)?t.filter(n=>typeof n=="string"):[]}catch{return[]}}),m=e("projects.list",{returnObjects:!0}),i=y.useMemo(()=>m.map(r=>{const t=B.find(n=>n.slug===r.slug);return t?{...t,...r,title:r.title??t.title??t.slug,date:r.date??"",description:r.description??"",github:t.github,external:t.external,tags:t.tags??[]}:null}).filter(Boolean),[m]),d=y.useMemo(()=>ee().map(r=>({id:r,label:$(r),skills:C(r).map(t=>t.name)})).filter(r=>r.skills.length>0),[]),s=y.useMemo(()=>d.flatMap(r=>r.skills),[d]),c=y.useMemo(()=>{const r=Object.fromEntries(s.map(n=>[n,0])),t=new Map(s.map(n=>[N(n),n]));return i.forEach(n=>{const v=new Set;n.tags.forEach(S=>{const k=t.get(N(S));k&&v.add(k)}),v.forEach(S=>{r[S]+=1})}),r},[s,i]),h=y.useMemo(()=>{if(l.length===0)return i;const r=l.map(N);return i.filter(t=>{const n=t.tags.map(N);return r.some(v=>n.includes(v))})},[i,l]),b=r=>{g(t=>t.includes(r)?t.filter(n=>n!==r):[...t,r])},j=()=>g([]);G.useEffect(()=>{window.localStorage.setItem(L,JSON.stringify(l))},[l]);const p=r=>{const t=I(r);return R(t?t.name:r)},u=r=>re(p(r)),f=(r,t)=>t?{backgroundColor:u(r),color:"#ffffff",borderColor:u(r)}:{backgroundColor:R(r),color:"#1f2937",borderColor:"rgba(31, 41, 55, 0.12)"},x=(r,t)=>({color:t?"#d1d5db":u(r),fontWeight:700});return a.jsxs("section",{className:"projects-section",children:[a.jsx(Q,{title:"filter",expandLabel:e("projects.filters.expand"),collapseLabel:e("projects.filters.collapse"),summaryLabel:`${h.length}/${i.length}`,groups:d,skillCounts:c,selectedSkills:l,onToggleSkill:b,onClear:j,getSkillStyle:f,getCountStyle:x}),a.jsxs("div",{className:"projects-grid",children:[h.map(r=>a.jsx(te,{project:r,shouldReduce:!!o},r.slug)),h.length===0&&a.jsx("p",{className:"projects-empty",children:e("projects.filters.empty")})]}),a.jsx(E.div,{className:"coming-soon",initial:o?!1:{opacity:0},viewport:{once:!0,amount:.2},whileInView:o?{}:{opacity:1},transition:{delay:.5},children:e("projects.comingSoon")}),a.jsx(J,{current:"Projects"})]})};export{ne as default};
