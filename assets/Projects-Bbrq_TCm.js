import{h as _,i as F,r as h,p as $,j as s,u as V,P as D,R as J,m as E}from"./index-DnGMhG_J.js";import{C as K}from"./ContextualCTA-jn7akQyn.js";function B(){!_.current&&F();const[e]=h.useState($.current);return e}var T=new Map,C=new WeakMap,R=0,G=void 0;function z(e){return e?(C.has(e)||(R+=1,C.set(e,R.toString())),C.get(e)):"0"}function H(e){return Object.keys(e).sort().filter(o=>e[o]!==void 0).map(o=>`${o}_${o==="root"?z(e.root):e[o]}`).toString()}function W(e){const o=H(e);let n=T.get(o);if(!n){const g=new Map;let u;const d=new IntersectionObserver(i=>{i.forEach(l=>{var a;const b=l.isIntersecting&&u.some(y=>l.intersectionRatio>=y);e.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=b),(a=g.get(l.target))==null||a.forEach(y=>{y(b,l)})})},e);u=d.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:o,observer:d,elements:g},T.set(o,n)}return n}function Y(e,o,n={},g=G){if(typeof window.IntersectionObserver>"u"&&g!==void 0){const a=e.getBoundingClientRect();return o(g,{isIntersecting:g,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:u,observer:d,elements:i}=W(n),l=i.get(e)||[];return i.has(e)||i.set(e,l),l.push(o),d.observe(e),function(){l.splice(l.indexOf(o),1),l.length===0&&(i.delete(e),d.unobserve(e)),i.size===0&&(d.disconnect(),T.delete(u))}}function U({threshold:e,delay:o,trackVisibility:n,rootMargin:g,root:u,triggerOnce:d,skip:i,initialInView:l,fallbackInView:a,onChange:b}={}){var y;const[j,v]=h.useState(null),r=h.useRef(b),[t,c]=h.useState({inView:!!l,entry:void 0});r.current=b,h.useEffect(()=>{if(i||!j)return;let S;return S=Y(j,(I,k)=>{c({inView:I,entry:k}),r.current&&r.current(I,k),k.isIntersecting&&d&&S&&(S(),S=void 0)},{root:u,rootMargin:g,threshold:e,trackVisibility:n,delay:o},a),()=>{S&&S()}},[Array.isArray(e)?e.toString():e,j,u,g,d,i,n,a,o]);const m=(y=t.entry)==null?void 0:y.target,p=h.useRef(void 0);!j&&m&&!d&&!i&&p.current!==m&&(p.current=m,c({inView:!!l,entry:void 0}));const f=[v,t.inView,t.entry];return f.ref=f[0],f.inView=f[1],f.entry=f[2],f}const X=({title:e,clearLabel:o,expandLabel:n,collapseLabel:g,summaryLabel:u,skills:d,selectedSkills:i,onToggleSkill:l,onClear:a,getSkillStyle:b,skillCounts:y,getCountStyle:j})=>{const v="projects.skillFilter.isExpanded",[r,t]=h.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(v)==="true");return h.useEffect(()=>{window.localStorage.setItem(v,String(r))},[r]),s.jsxs("div",{className:"projects-filters","aria-label":e,children:[s.jsxs("div",{className:"projects-filters-header",children:[s.jsx("p",{className:"projects-filters-title",children:e}),s.jsx("div",{className:"projects-filters-actions",children:s.jsx("button",{type:"button",className:`skill-filter-toggle-circle ${r?"is-expanded":""}`,onClick:()=>t(c=>!c),"aria-expanded":r,"aria-label":r?g:n,title:r?g:n,children:s.jsx("span",{className:"skill-filter-toggle-chevron","aria-hidden":"true",children:">"})})})]}),s.jsx("div",{className:`projects-filters-body ${r?"is-expanded":""}`,"aria-hidden":!r,children:s.jsxs("div",{className:"projects-filters-body-inner",children:[s.jsx("ul",{className:"skills-filter-list",children:d.map(c=>{const m=i.includes(c);return s.jsx("li",{children:s.jsxs("button",{type:"button",className:`skill-filter ${m?"is-active":""}`,onClick:()=>l(c),style:b(c,m),children:[c," ",s.jsxs("span",{className:"skill-filter-count",style:j(c,m),children:["(",y[c]??0,")"]})]})},c)})}),s.jsxs("div",{className:"projects-filter-footer",children:[s.jsx("p",{className:"projects-filter-summary",children:u}),s.jsx("button",{type:"button",className:"skill-filter skill-filter-clear",onClick:a,disabled:i.length===0,children:o})]})]})})]})},M={programming:{label:"Programming Languages",order:1},web:{label:"Web Frameworks & UI Libraries",order:2},mobile:{label:"Mobile & Cross-Platform Development",order:3},cloud:{label:"Cloud & DevOps",order:4},tools:{label:"Development Tools & IDEs",order:5},design:{label:"Design & Modelling",order:6},concepts:{label:"Concepts & Architecture",order:7}},L=[{name:"Java",category:"programming",color:"amber",order:1},{name:"Kotlin",category:"programming",color:"lavender",order:2},{name:"C++",category:"programming",color:"blue",order:3},{name:"C",category:"programming",color:"blue",order:4},{name:"Python",category:"programming",color:"blue",order:5},{name:"Go",category:"programming",color:"sky",order:6},{name:"JavaScript",category:"programming",color:"lemon",order:7},{name:"Dart",category:"programming",color:"sky",order:8},{name:"Prolog",category:"programming",color:"rose",order:9},{name:"Haskell",category:"programming",color:"lilac",order:10},{name:"React",category:"web",color:"green",order:1},{name:"Node.js",category:"web",color:"green",order:2},{name:"HTML",category:"web",color:"peach",order:3},{name:"CSS",category:"web",color:"yellow",order:4},{name:"Flutter",category:"mobile",color:"sky",order:1},{name:"Jetpack Compose",category:"mobile",color:"green",order:2},{name:"Android",category:"mobile",color:"green",order:3},{name:"Git",category:"cloud",color:"orange",order:1},{name:"Firebase",category:"cloud",color:"yellow",order:2},{name:"AWS",category:"cloud",color:"peach",order:3},{name:"Vagrant",category:"cloud",color:"blue",order:4},{name:"GitHub Actions",category:"cloud",color:"orange",order:5},{name:"Android Studio",category:"tools",color:"green",order:1},{name:"IntelliJ",category:"tools",color:"pink",order:2},{name:"VS Code",category:"tools",color:"blue",order:3},{name:"Figma",category:"design",color:"green",order:1},{name:"Canva",category:"design",color:"lavender",order:2},{name:"Fusion 360",category:"design",color:"yellow",order:3},{name:"Maya",category:"design",color:"sky",order:4},{name:"MVVM",category:"concepts",color:"periwinkle",order:1},{name:"SRS",category:"concepts",color:"amber",order:2},{name:"AI",category:"concepts",color:"rose",order:3},{name:"Pathfinding",category:"concepts",color:"sky",order:4},{name:"Rendering",category:"concepts",color:"blue",order:5},{name:"3D Graphics",category:"concepts",color:"lavender",order:6},{name:"Concurrency",category:"concepts",color:"green",order:7},{name:"Algorithms",category:"concepts",color:"orange",order:8},{name:"Game Development",category:"concepts",color:"lilac",order:9}],q={pink:"#f5c6e6",rose:"#ffbecf",peach:"#ffc6bc",orange:"#ffc8aa",amber:"#ffd29a",lemon:"#fffb8d",yellow:"#ffe993",green:"#aaedaf",sky:"#a4e4fa",blue:"#b7d1ff",periwinkle:"#d2e3fc",lavender:"#dec7ff",lilac:"#ddbdfc"},O=e=>e.trim().toLowerCase(),Q=new Map(L.map(e=>[O(e.name),e])),P=e=>Q.get(O(e)),w=e=>{const o=P(e);return o?q[o.color]:"#f0f0f0"},Z=e=>M[e].label,ee=()=>Object.keys(M).sort((e,o)=>M[e].order-M[o].order),x=e=>L.filter(o=>o.category===e).sort((o,n)=>o.order-n.order);x("programming").map(e=>e.name),x("web").map(e=>e.name),x("mobile").map(e=>e.name),x("cloud").map(e=>e.name),x("tools").map(e=>e.name),x("design").map(e=>e.name),x("concepts").map(e=>e.name);const N=e=>e.trim().toLowerCase(),A="projects.selectedSkills",re=e=>{const o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!o)return e;let n=parseInt(o[1],16)/255,g=parseInt(o[2],16)/255,u=parseInt(o[3],16)/255;const d=Math.max(n,g,u),i=Math.min(n,g,u),l=d-i;let a=0,b=0;const y=(d+i)/2;l!==0&&(b=l/(1-Math.abs(2*y-1)),d===n?a=(g-u)/l%6:d===g?a=(u-n)/l+2:a=(n-g)/l+4,a*=60,a<0&&(a+=360));const j=Math.min(1,b+.45),v=Math.max(0,Math.min(1,y-.3)),r=(1-Math.abs(2*v-1))*j,t=r*(1-Math.abs(a/60%2-1)),c=v-r/2;let m=0,p=0,f=0;return a>=0&&a<60?[m,p,f]=[r,t,0]:a<120?[m,p,f]=[t,r,0]:a<180?[m,p,f]=[0,r,t]:a<240?[m,p,f]=[0,t,r]:a<300?[m,p,f]=[t,0,r]:[m,p,f]=[r,0,t],`rgb(${Math.round((m+c)*255)} ${Math.round((p+c)*255)} ${Math.round((f+c)*255)})`},oe=({project:e,shouldReduce:o})=>{const[n,g]=U({triggerOnce:!0,threshold:.15}),u=e.external??e.github??`/projects/${e.slug}`,d=!!(e.external||e.github);return s.jsx(E.a,{ref:n,href:u,target:d?"_blank":void 0,rel:d?"noreferrer noopener":void 0,className:"project-card-link",initial:o?!1:{opacity:0,y:30},animate:g?o?{}:{opacity:1,y:0}:{},whileHover:o?{}:{y:-6,scale:1.01},whileTap:o?{}:{scale:.99},transition:{type:"spring",stiffness:220,damping:16},children:s.jsxs("div",{className:"project-card",children:[s.jsxs("div",{className:"project-media",children:[e.cover?s.jsx(E.img,{src:e.cover,alt:e.title,className:"project-image",loading:"lazy"}):s.jsx("div",{className:"project-image placeholder","aria-hidden":"true"}),s.jsx("span",{className:"project-chip",children:e.date||"Featured Project"})]}),s.jsxs("div",{className:"project-text",children:[s.jsx("h3",{className:"project-card-title",children:e.title}),e.description&&s.jsx("p",{className:"project-description",children:e.description}),e.tags.length>0&&s.jsx("ul",{className:"project-tags","aria-label":"Skills used",children:e.tags.map(i=>{const l=P(i),a=l?l.name:i;return s.jsx("li",{className:"project-tag",style:{backgroundColor:w(i)},title:l?Z(l.category):"Project keyword",children:a},`${e.slug}-${i}`)})})]})]})})},ae=()=>{const{t:e}=V(),o=B(),[n,g]=h.useState(()=>{if(typeof window>"u")return[];const r=window.localStorage.getItem(A);if(!r)return[];try{const t=JSON.parse(r);return Array.isArray(t)?t.filter(c=>typeof c=="string"):[]}catch{return[]}}),u=e("projects.list",{returnObjects:!0}),d=h.useMemo(()=>u.map(r=>{const t=D.find(c=>c.slug===r.slug);return t?{...t,...r,title:r.title??t.title??t.slug,date:r.date??"",description:r.description??"",github:t.github,external:t.external,tags:t.tags??[]}:null}).filter(Boolean),[u]),i=h.useMemo(()=>ee().flatMap(r=>x(r).map(t=>t.name)),[]),l=h.useMemo(()=>{const r=Object.fromEntries(i.map(c=>[c,0])),t=new Map(i.map(c=>[N(c),c]));return d.forEach(c=>{const m=new Set;c.tags.forEach(p=>{const f=t.get(N(p));f&&m.add(f)}),m.forEach(p=>{r[p]+=1})}),r},[i,d]),a=h.useMemo(()=>{if(n.length===0)return d;const r=n.map(N);return d.filter(t=>{const c=t.tags.map(N);return r.some(m=>c.includes(m))})},[d,n]),b=r=>{g(t=>t.includes(r)?t.filter(c=>c!==r):[...t,r])},y=()=>g([]);J.useEffect(()=>{window.localStorage.setItem(A,JSON.stringify(n))},[n]);const j=(r,t)=>t?{backgroundColor:"#111111",color:w(r),borderColor:w(r)}:{backgroundColor:w(r),color:"#1f2937",borderColor:"rgba(31, 41, 55, 0.12)"},v=r=>({color:re(w(r)),fontWeight:700});return s.jsxs("section",{className:"projects-section",children:[s.jsx(X,{title:e("projects.filters.title"),clearLabel:e("projects.filters.clear"),expandLabel:e("projects.filters.expand"),collapseLabel:e("projects.filters.collapse"),summaryLabel:e("projects.filters.summary",{count:a.length}),skills:i,skillCounts:l,selectedSkills:n,onToggleSkill:b,onClear:y,getSkillStyle:j,getCountStyle:v}),s.jsxs("div",{className:"projects-grid",children:[a.map(r=>s.jsx(oe,{project:r,shouldReduce:!!o},r.slug)),a.length===0&&s.jsx("p",{className:"projects-empty",children:e("projects.filters.empty")})]}),s.jsx(E.div,{className:"coming-soon",initial:o?!1:{opacity:0},viewport:{once:!0,amount:.2},whileInView:o?{}:{opacity:1},transition:{delay:.5},children:e("projects.comingSoon")}),s.jsx(K,{current:"Projects"})]})};export{ae as default};
