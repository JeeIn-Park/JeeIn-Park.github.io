import{h as V,i as B,r as f,p as G,j as a,u as J,P as K,R as H,m as M}from"./index-Dj_aS4S-.js";import{C as z}from"./ContextualCTA-CfP7rZiW.js";import{U as x,C as P}from"./colors-B569qMv8.js";function Y(){!V.current&&B();const[e]=f.useState(G.current);return e}var A=new Map,N=new WeakMap,L=0,U=void 0;function W(e){return e?(N.has(e)||(L+=1,N.set(e,L.toString())),N.get(e)):"0"}function X(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?W(e.root):e[t]}`).toString()}function q(e){const t=X(e);let n=A.get(t);if(!n){const m=new Map;let p;const i=new IntersectionObserver(c=>{c.forEach(l=>{var u;const h=l.isIntersecting&&p.some(y=>l.intersectionRatio>=y);e.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=h),(u=m.get(l.target))==null||u.forEach(y=>{y(h,l)})})},e);p=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:i,elements:m},A.set(t,n)}return n}function Q(e,t,n={},m=U){if(typeof window.IntersectionObserver>"u"&&m!==void 0){const u=e.getBoundingClientRect();return t(m,{isIntersecting:m,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:u,intersectionRect:u,rootBounds:u}),()=>{}}const{id:p,observer:i,elements:c}=q(n),l=c.get(e)||[];return c.has(e)||c.set(e,l),l.push(t),i.observe(e),function(){l.splice(l.indexOf(t),1),l.length===0&&(c.delete(e),i.unobserve(e)),c.size===0&&(i.disconnect(),A.delete(p))}}function Z({threshold:e,delay:t,trackVisibility:n,rootMargin:m,root:p,triggerOnce:i,skip:c,initialInView:l,fallbackInView:u,onChange:h}={}){var y;const[b,S]=f.useState(null),v=f.useRef(h),[g,C]=f.useState({inView:!!l,entry:void 0});v.current=h,f.useEffect(()=>{if(c||!b)return;let d;return d=Q(b,(j,w)=>{C({inView:j,entry:w}),v.current&&v.current(j,w),w.isIntersecting&&i&&d&&(d(),d=void 0)},{root:p,rootMargin:m,threshold:e,trackVisibility:n,delay:t},u),()=>{d&&d()}},[Array.isArray(e)?e.toString():e,b,p,m,i,c,n,u,t]);const r=(y=g.entry)==null?void 0:y.target,s=f.useRef(void 0);!b&&r&&!i&&!c&&s.current!==r&&(s.current=r,C({inView:!!l,entry:void 0}));const o=[S,g.inView,g.entry];return o.ref=o[0],o.inView=o[1],o.entry=o[2],o}const ee=({title:e,expandLabel:t,collapseLabel:n,summaryLabel:m,groups:p,selectedSkills:i,onToggleSkill:c,onClear:l,getSkillStyle:u,skillCounts:h,getCountAccentColor:y,getCountNormalColor:b,getCountLightColor:S})=>{const v="projects.skillFilter.isExpanded",[g,C]=f.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(v)==="true");f.useEffect(()=>{window.localStorage.setItem(v,String(g))},[g]);const r=()=>{C(o=>!o)},s=o=>o instanceof Element&&!!o.closest("button, a, input, select, textarea");return a.jsxs("div",{className:`projects-filters ${g?"":"is-collapsed"}`.trim(),"aria-label":e,"aria-expanded":g,style:{"--ui-text-secondary":x.text.secondary,"--ui-text-accent":x.text.accent,"--ui-surface-highlight":x.surface.highlight,"--ui-surface-highlight-hover":x.surface.highlightHover,"--ui-border-highlight":x.border.highlight,"--ui-shadow-highlight":x.shadow.highlight,"--ui-icon-hover-muted":x.icon.hoverMuted,"--ui-icon-hover-strong":x.icon.hoverStrong},onClick:o=>{s(o.target)||r()},children:[a.jsxs("div",{className:"projects-filters-header",onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r())},role:"button",tabIndex:0,"aria-expanded":g,children:[a.jsxs("div",{className:"projects-filters-header-main",children:[a.jsx("p",{className:`projects-filters-title ${i.length>0?"is-filtered":""}`.trim(),children:e}),a.jsx("button",{type:"button",className:`skill-filter-clear ${i.length===0?"is-hidden":""}`.trim(),onClick:l,disabled:i.length===0,"aria-hidden":i.length===0,"aria-label":"clear filters",title:"clear filters",children:"ðŸ—‘ï¸"})]}),a.jsxs("div",{className:"projects-filters-actions",children:[a.jsx("p",{className:"projects-filter-summary projects-filter-summary-inline",children:m}),a.jsx("button",{type:"button",className:`skill-filter-toggle-circle ${g?"is-expanded":""}`,onClick:o=>{o.stopPropagation(),r()},"aria-expanded":g,"aria-label":g?n:t,title:g?n:t,children:a.jsx("span",{className:"skill-filter-toggle-chevron","aria-hidden":"true",children:">"})})]})]}),a.jsx("div",{className:`projects-filters-body ${g?"is-expanded":""}`,"aria-hidden":!g,children:a.jsx("div",{className:"projects-filters-body-inner",children:a.jsx("div",{className:"skills-filter-groups",children:p.map(o=>a.jsxs("section",{className:"skills-filter-group",children:[a.jsx("h3",{className:"skills-filter-group-title",children:o.label}),a.jsx("ul",{className:"skills-filter-list",children:o.skills.map(d=>{const j=i.includes(d);return a.jsx("li",{children:a.jsxs("button",{type:"button",className:`skill-filter ${j?"is-active":""}`,onClick:()=>c(d),style:u(d,j),children:[d," ",a.jsx("span",{className:`skill-filter-count ${j?"is-selected":""}`.trim(),style:{"--skill-count-accent":y(d),"--skill-count-normal":b(d),"--skill-count-light":S(d)},children:h[d]??0})]})},d)})})]},o.id))})})})]})},T={programming:{label:"Programming Languages",order:1},application:{label:"Application Development",order:2},platform:{label:"Cloud, DevOps & Development Tools",order:3},design:{label:"Design & Concepts",order:4}},_=[{name:"Java",category:"programming",color:"amber",order:1},{name:"Kotlin",category:"programming",color:"lavender",order:2},{name:"C++",category:"programming",color:"periwinkle",order:3},{name:"C",category:"programming",color:"blue",order:4},{name:"Python",category:"programming",color:"blue",order:5},{name:"Go",category:"programming",color:"sky",order:6},{name:"JavaScript",category:"programming",color:"yellow",order:7},{name:"Dart",category:"programming",color:"sky",order:8},{name:"Prolog",category:"programming",color:"rose",order:9},{name:"Haskell",category:"programming",color:"lilac",order:10},{name:"React",category:"application",color:"periwinkle",order:1},{name:"Node.js",category:"application",color:"green",order:2},{name:"HTML",category:"application",color:"peach",order:3},{name:"CSS",category:"application",color:"yellow",order:4},{name:"Flutter",category:"application",color:"sky",order:5},{name:"Jetpack Compose",category:"application",color:"blue",order:6},{name:"Android",category:"application",color:"green",order:7},{name:"Android Studio",category:"application",color:"green",order:8},{name:"Game Development",category:"application",color:"lilac",order:9},{name:"Git",category:"platform",color:"peach",order:1},{name:"Firebase",category:"platform",color:"yellow",order:2},{name:"AWS",category:"platform",color:"orange",order:3},{name:"Vagrant",category:"platform",color:"blue",order:4},{name:"GitHub Actions",category:"platform",color:"peach",order:5},{name:"IntelliJ",category:"platform",color:"pink",order:6},{name:"VS Code",category:"platform",color:"sky",order:7},{name:"Figma",category:"design",color:"pink",order:1},{name:"Canva",category:"design",color:"lilac",order:2},{name:"Fusion 360",category:"design",color:"yellow",order:3},{name:"Maya",category:"design",color:"sky",order:4},{name:"Rendering",category:"design",color:"periwinkle",order:5},{name:"3D Graphics",category:"design",color:"amber",order:6},{name:"MVVM",category:"design",color:"green",order:7},{name:"AI",category:"design",color:"rose",order:9},{name:"Pathfinding",category:"design",color:"sky",order:10},{name:"Concurrency",category:"design",color:"rose",order:11},{name:"Algorithms",category:"design",color:"yellow",order:12}],$=e=>e.trim().toLowerCase(),re=new Map(_.map(e=>[$(e.name),e])),I=e=>re.get($(e)),F=e=>{const t=I(e);return t?P[t.color].normal:"#f0f0f0"},R=(e,t="normal")=>{const n=I(e);return n?P[n.color][t]:"#f0f0f0"},D=e=>T[e].label,te=()=>Object.keys(T).sort((e,t)=>T[e].order-T[t].order),k=e=>_.filter(t=>t.category===e).sort((t,n)=>t.order-n.order);k("programming").map(e=>e.name),k("application").map(e=>e.name),k("platform").map(e=>e.name),k("design").map(e=>e.name);const E=e=>e.trim().toLowerCase(),O="projects.selectedSkills",oe=({project:e,shouldReduce:t})=>{const[n,m]=Z({triggerOnce:!0,threshold:.15}),p=e.external??e.github??`/projects/${e.slug}`,i=!!(e.external||e.github);return a.jsx(M.a,{ref:n,href:p,target:i?"_blank":void 0,rel:i?"noreferrer noopener":void 0,className:"project-card-link",initial:t?!1:{opacity:0,y:30},animate:m?t?{}:{opacity:1,y:0}:{},whileHover:t?{}:{y:-6,scale:1.01},whileTap:t?{}:{scale:.99},transition:{type:"spring",stiffness:220,damping:16},children:a.jsxs("div",{className:"project-card",children:[a.jsxs("div",{className:"project-media",children:[e.cover?a.jsx(M.img,{src:e.cover,alt:e.title,className:"project-image",loading:"lazy"}):a.jsx("div",{className:"project-image placeholder","aria-hidden":"true"}),a.jsx("span",{className:"project-chip",children:e.date||"Featured Project"})]}),a.jsxs("div",{className:"project-text",children:[a.jsx("h3",{className:"project-card-title",children:e.title}),e.tags.length>0&&a.jsx("ul",{className:"project-tags","aria-label":"Skills used",children:e.tags.map(c=>{const l=I(c),u=l?l.name:c;return a.jsx("li",{className:"project-tag",style:{backgroundColor:F(c)},title:l?D(l.category):"Project keyword",children:u},`${e.slug}-${c}`)})})]})]})})},ie=()=>{const{t:e}=J(),t=Y(),[n,m]=f.useState(()=>{if(typeof window>"u")return[];const r=window.localStorage.getItem(O);if(!r)return[];try{const s=JSON.parse(r);return Array.isArray(s)?s.filter(o=>typeof o=="string"):[]}catch{return[]}}),p=e("projects.list",{returnObjects:!0}),i=f.useMemo(()=>p.map(r=>{const s=K.find(o=>o.slug===r.slug);return s?{...s,...r,title:r.title??s.title??s.slug,date:r.date??"",description:r.description??"",github:s.github,external:s.external,tags:s.tags??[]}:null}).filter(Boolean),[p]),c=f.useMemo(()=>te().map(r=>({id:r,label:D(r),skills:k(r).map(s=>s.name)})).filter(r=>r.skills.length>0),[]),l=f.useMemo(()=>c.flatMap(r=>r.skills),[c]),u=f.useMemo(()=>{const r=Object.fromEntries(l.map(o=>[o,0])),s=new Map(l.map(o=>[E(o),o]));return i.forEach(o=>{const d=new Set;o.tags.forEach(j=>{const w=s.get(E(j));w&&d.add(w)}),d.forEach(j=>{r[j]+=1})}),r},[l,i]),h=f.useMemo(()=>{if(n.length===0)return i;const r=n.map(E);return i.filter(s=>{const o=s.tags.map(E);return r.some(d=>o.includes(d))})},[i,n]),y=r=>{m(s=>s.includes(r)?s.filter(o=>o!==r):[...s,r])},b=()=>m([]);H.useEffect(()=>{window.localStorage.setItem(O,JSON.stringify(n))},[n]);const S=r=>R(r,"dark"),v=r=>R(r,"normal"),g=r=>R(r,"light"),C=(r,s)=>s?{backgroundColor:S(r),color:"#ffffff",borderColor:S(r)}:{backgroundColor:F(r),color:"#1f2937",borderColor:"rgba(31, 41, 55, 0.12)"};return a.jsxs("section",{className:"projects-section",children:[a.jsx(ee,{title:"filter",expandLabel:e("projects.filters.expand"),collapseLabel:e("projects.filters.collapse"),summaryLabel:`${h.length}/${i.length}`,groups:c,skillCounts:u,selectedSkills:n,onToggleSkill:y,onClear:b,getSkillStyle:C,getCountAccentColor:S,getCountNormalColor:v,getCountLightColor:g}),a.jsxs("div",{className:"projects-grid",children:[h.map(r=>a.jsx(oe,{project:r,shouldReduce:!!t},r.slug)),h.length===0&&a.jsx("p",{className:"projects-empty",children:e("projects.filters.empty")})]}),a.jsx(M.div,{className:"coming-soon",initial:t?!1:{opacity:0},viewport:{once:!0,amount:.2},whileInView:t?{}:{opacity:1},transition:{delay:.5},children:e("projects.comingSoon")}),a.jsx(z,{current:"Projects"})]})};export{ie as default};
